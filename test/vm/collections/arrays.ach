// Array operations: literals, indexing, push/pop, len, mutation, nested

// Literal + indexing
let arr = [10, 20, 30]
assert(arr[0] == 10)
assert(arr[1] == 20)
assert(arr[2] == 30)

// Empty list
let empty = []
assert(len(empty) == 0)

// len
assert(len(arr) == 3)
assert(len([1]) == 1)

// push + pop
mut items = [1, 2]
push(items, 3)
assert(len(items) == 3)
assert(items[2] == 3)

let last = pop(items)
assert(last == 3)
assert(len(items) == 2)

// Multiple push/pop
push(items, 10)
push(items, 20)
push(items, 30)
assert(len(items) == 5)
assert(pop(items) == 30)
assert(pop(items) == 20)
assert(len(items) == 3)

// Assignment via index
mut nums = [0, 0, 0]
nums[0] = 10
nums[1] = 20
nums[2] = 30
assert(nums[0] == 10)
assert(nums[1] == 20)
assert(nums[2] == 30)

// Heterogeneous list
let mixed = [1, "two", true, nil]
assert(len(mixed) == 4)
assert(mixed[0] == 1)
assert(mixed[1] == "two")
assert(mixed[2] == true)
assert(mixed[3] == nil)

// Nested lists
let matrix = [[1, 2], [3, 4]]
assert(matrix[0][0] == 1)
assert(matrix[0][1] == 2)
assert(matrix[1][0] == 3)
assert(matrix[1][1] == 4)

// Build list in loop
mut squares = []
mut i = 0
while i < 5 {
    push(squares, i * i)
    i = i + 1
}
assert(len(squares) == 5)
assert(squares[0] == 0)
assert(squares[1] == 1)
assert(squares[4] == 16)

// for..in on array
mut total = 0
for x in [10, 20, 30] {
    total = total + x
}
assert(total == 60)

// for..in with variable
let data = [1, 2, 3, 4, 5]
mut sum = 0
for v in data {
    sum = sum + v
}
assert(sum == 15)

print("PASS: collections/arrays")
